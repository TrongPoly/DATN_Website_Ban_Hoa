<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Zay Shop - Product Listing Page</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="apple-touch-icon" href="assets/img/apple-icon.png" />
<link rel="shortcut icon" type="image/x-icon"
	href="assets/img/favicon.ico" />

<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="assets/css/templatemo.css" />
<link rel="stylesheet" href="assets/css/custom.css" />

<!-- Load fonts style after rendering the layout styles -->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap" />
<link rel="stylesheet" href="assets/css/fontawesome.min.css" />
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
</head>

<body ng-app="myApp">
	<!-- Start Top Nav -->
	<nav th:insert="~{fragment/_nav.html::nav}"></nav>
	<!-- Close Top Nav -->

	<!-- Header -->
	<nav th:insert="~{fragment/_header.html::header}"></nav>
	<!-- Close Header -->

	<!-- Start Content -->
	<div class="container py-5" ng-controller="orderCtrl">

		<div class="row">
			<div class="col-md-10 col-sm-10 offset-1">
				<div>
					<ul class="nav nav-tabs" id="myTab" role="tablist">
						<li class="nav-item" role="presentation">
							<button ng-click="getOrder(0)" class="nav-link active"
								id="home-tab" data-bs-toggle="tab" data-bs-target="#home"
								type="button" role="tab" aria-controls="home"
								aria-selected="true">Chờ xử lý</button>
						</li>
						<li class="nav-item" role="presentation">
							<button ng-click="getOrder(1)" class="nav-link" id="profile-tab"
								data-bs-toggle="tab" data-bs-target="#profile" type="button"
								role="tab" aria-controls="profile" aria-selected="false">Đã
								xác nhận</button>
						</li>
						<li class="nav-item" role="presentation">
							<button ng-click="getOrder(2)" class="nav-link" id="contact-tab"
								data-bs-toggle="tab" data-bs-target="#contact" type="button"
								role="tab" aria-controls="contact" aria-selected="false">Sẵn
								sàng để lấy</button>
						</li>
						<li class="nav-item" role="presentation">
							<button ng-click="getOrder(3)" class="nav-link" id="contact-tab"
								data-bs-toggle="tab" data-bs-target="#contact" type="button"
								role="tab" aria-controls="contact" aria-selected="false">Đã
								nhận hàng</button>
						</li>
						<li class="nav-item" role="presentation">
							<button ng-click="getOrder(4)" class="nav-link" id="contact-tab"
								data-bs-toggle="tab" data-bs-target="#contact" type="button"
								role="tab" aria-controls="contact" aria-selected="false">Đã
								hủy</button>
						</li>
						<li class="nav-item" role="presentation">
							<button ng-click="getOrder(5)" class="nav-link" id="contact-tab"
								data-bs-toggle="tab" data-bs-target="#contact" type="button"
								role="tab" aria-controls="contact" aria-selected="false">Yêu cầu hủy</button>
						</li>
					</ul>
				</div>
				<div class="row">
					<div class="col-sm-12">
						<div class="tab-content">
							<div role="tabpanel" id="2" class="tab-pane active">
								<table role="tabpanel"
									class="table table-striped table-bordered" style="width: 100%">
									<thead>
										<tr>
											<th>Mã đơn hàng</th>
											<th>Ngày đặt hàng</th>
											<th>Ngày lấy</th>
											<th>Action</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="order in listOrder">
											<td>{{order.id}}</td>
											<td>{{order.orderDate | date: "dd/MM/yyyy, HH:mm"}}</td>
											<td>{{order.pickUpDate | date: "dd/MM/yyyy, HH:mm"}}</td>
											<td>
											<!-- Huy don -->
											<a ng-if="order.status==0" class="btn btn-danger text-white"
												ng-click="requestCancelOrder(order.id)"><i class="fa fa-solid fa-window-close"></i></a>
												
											<a data-bs-toggle="modal"
												data-bs-target="#orderDetailsModal"
												class="btn btn-warning text-white"
												ng-click="getOrderDetails(order.id) "> <i
													class="fa fa-fw fa-search"></i>
											</a></td>
										</tr>
									</tbody>
								</table>
							</div>

							<!-- Modal -->
							<div class="modal fade" id="orderDetailsModal" tabindex="-1"
								aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLabel">Chi tiết</h5>
											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<!-- <table class="table-striped col-12">
														<tr ng:repeat="atv in activity">
															<td>{{atv.ngayCapNhat | date: "dd/MM/yyyy, HH:mm"}}</td>
															<td><span ng-if="atv.trangThai==1"><i
																	class='bx bx-notepad'></i> Chờ xử lý</span> <span
																ng-if="atv.trangThai==2"><i class='bx bxs-truck'></i>
																	Đang vận chuyển</span> <span ng-if="atv.trangThai==3"><i
																	class='bx bxs-check-circle'></i> Giao hàng thành công</span> <span
																ng-if="atv.trangThai==4"> <i
																	class='bx bxs-calendar-x'></i>Đã hủy đơn
															</span> <span ng-if="atv.trangThai==5"> <i
																	class='bx bxs-calendar-x'></i>Yêu cầu hủy đơn
															</span> <span ng-if="atv.trangThai==6"> <i
																	class='bx bxs-calendar-x'></i>Từ chối yêu cầu
															</span> <span ng-if="atv.trangThai==7"> <i
																	class='bx bx-message-alt-check'></i>Xác nhận đã nhận
																	hàng
															</span></td>
														</tr>

													</table> -->
											<table class="table table-bordered table-default">
												<tr>
													<th>Tên sản phẩm</th>
													<th>Số lượng</th>
													<th>Đơn giá</th>
													<th>Thành tiền</th>
												</tr>
												<tbody>
													<tr ng:repeat="item in listOrderDetails">
														<td>{{item.product.name}}</td>
														<td>{{item.quantity}}</td>
														<td>{{item.product.price |number : 0}}</td>
														<td>{{item.quantity*item.product.price|number :0}}</td>
													</tr>
												</tbody>
												<tfoot>
													<tr>
														<td colspan="6">Tổng tiền:
															<h4>{{total() | number : 0}} VNĐ</h4>
														</td>
													</tr>
												</tfoot>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Content -->

	<!-- Start Footer -->
	<footer th:insert="~{/fragment/_footer}"></footer>
	<!-- End Footer -->

	<!-- Start Script -->
	<script src="assets/js/jquery-1.11.0.min.js"></script>
	<script src="assets/js/jquery-migrate-1.2.1.min.js"></script>
	<script src="assets/js/bootstrap.bundle.min.js"></script>
	<script src="assets/js/templatemo.js"></script>
	<script src="assets/js/custom.js"></script>
	<!--AngurlarJS -->
	<script src="js/app/app.js"></script>
	<script src="js/service/orderService.js"></script>
	<script src="js/controller/orderController.js"></script>

	<!-- End Script -->
</body>
</html>
